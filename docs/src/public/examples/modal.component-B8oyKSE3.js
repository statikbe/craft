import{D as l,_ as a}from"./docs-LJADo47n.js";import{S as d}from"./site-lang-Bijq8_jq.js";import{A as h}from"./ajax-BnX9PgEQ.js";class v{constructor(t={}){this.options={onClose:null,plugins:[]},this.plugins=new Array,this.options={...this.options,...t};const i=document.querySelectorAll("button[data-modal]");Array.from(i).forEach(e=>{this.initModal(e,t)}),l.onDynamicContent(document.documentElement,"button[data-modal]",e=>{Array.from(e).forEach(s=>{this.initModal(s,t)})}),this.options.plugins.forEach(e=>{const s=document.querySelectorAll(e.selector);Array.from(s).forEach(r=>{this.initModal(r,t,e)}),l.onDynamicContent(document.documentElement,e.selector,r=>{Array.from(r).forEach(o=>{this.initModal(o,t,e)})})})}initModal(t,i={},e=null){let s=null;if(e&&(s=typeof e.module=="function"?new e.module(e.selector):new e.module.plugin(e.selector)),!t.hasAttribute("data-modal-initialized"))if(t.setAttribute("data-modal-initialized","true"),t.hasAttribute("data-group")){const r=t.getAttribute("data-group"),o=document.querySelectorAll(`button[data-group="${r}"]`);return Array.from(o).indexOf(t)>0?void 0:new u(t,i,s)}else return new u(t,i,s)}}class u{constructor(t,i={},e=null){this.siteLang=d.getLang(),this.options={},this.currentGroupIndex=0,this.startTouchX=0,this.startTouchY=0,this.cssClasses={closePosition:"absolute -top-4 -right-4",closeStyle:"modal__close bg-white p-2",closeAfter:'after:block after:text-black after:shrink-0 after:w-[1em] after:h-[1em] after:mask-center after:mask-no-repeat after:mask-contain after:bg-current after:mask-[url("/icons/clear.svg")]',loaderStyle:"modal__loader__wrapper p-6 bg-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",nextButtonStyle:"modal__next-button absolute top-1/2 -translate-y-1/2 left-full -mr-4 bg-white p-2 disabled:hidden",nextButtonAfter:'after:block after:text-black after:shrink-0 after:w-[1em] after:h-[1em] after:mask-center after:mask-no-repeat after:mask-contain after:bg-current after:mask-[url("/icons/chevron-right.svg")]',prevButtonStyle:"modal__prev-button absolute top-1/2 -translate-y-1/2 right-full -ml-4 bg-white p-2 disabled:hidden",prevButtonAfter:'after:block after:text-black after:shrink-0 after:w-[1em] after:h-[1em] after:mask-center after:mask-no-repeat after:mask-contain after:bg-current after:mask-[url("/icons/chevron-left.svg")]'},this.lang=c(`../i18n/s-modal-${this.siteLang}.json`),this.options={...this.options,...i},this.plugin=e,this.initTrigger(t)}async getLang(){this.lang=g(`../i18n/s-modal-${this.siteLang}.json`)}initTrigger(t){if(this.trigger=t,!this.trigger)return;Object.keys(this.trigger.dataset).forEach(s=>{this.cssClasses[s]&&(this.cssClasses[s]=this.trigger.dataset[s])}),this.trigger.getAttribute("data-modal")&&(this.dialog=document.getElementById(this.trigger.getAttribute("data-modal")),this.onDialogCreation(),this.addCloseButton(),this.activateCloseButtons());const e=new MutationObserver(s=>{s.forEach(r=>{r.removedNodes.forEach(o=>{(o===this.trigger||o.contains(this.trigger))&&(this.dialog&&this.dialog.remove(),e.disconnect())})})});if(e.observe(document.documentElement,{childList:!0,subtree:!0}),this.trigger.hasAttribute("data-group")){const s=this.trigger.getAttribute("data-group");document.querySelectorAll(`button[data-group="${s}"]`).forEach((o,m)=>{o.addEventListener("click",this.triggerClicked.bind(this))})}else this.trigger.addEventListener("click",this.triggerClicked.bind(this))}triggerClicked(t){const i=this;t.preventDefault();let e=!0;this.trigger=t.currentTarget,this.plugin&&t.currentTarget.matches(`${this.plugin.getTriggerSelector()}`)&&(e=!1,this.options={...this.options,...this.plugin.getOptions()},this.plugin.openModalClick(i)),e&&this.dialog&&this.dialog.showModal()}addCloseButton(){this.modalCloseBtn=document.createElement("button"),this.modalCloseBtn.classList.add(...this.cssClasses.closePosition.split(" ")),this.modalCloseBtn.classList.add(...this.cssClasses.closeStyle.split(" ")),this.modalCloseBtn.classList.add(...this.cssClasses.closeAfter.split(" ")),this.modalCloseBtn.setAttribute("type","button"),this.modalCloseBtn.insertAdjacentHTML("beforeend",`<span class="sr-only">${this.lang.closeLabel}</span>`),this.modalCloseBtn.addEventListener("click",()=>{this.dialog.close()}),this.dialog.insertAdjacentElement("afterbegin",this.modalCloseBtn)}activateCloseButtons(){this.dialog.querySelectorAll("button[data-modal-close]").forEach(t=>{t.addEventListener("click",()=>{this.dialog.close()})})}openPluginModal(){this.plugin&&(this.plugin.openModalClick(this),this.dialog.showModal())}addNavigation(){this.nextButton=document.createElement("button"),this.nextButton.setAttribute("type","button"),this.nextButton.setAttribute("aria-label",this.lang.nextLabel),this.nextButton.classList.add(...this.cssClasses.nextButtonStyle.split(" ")),this.nextButton.classList.add(...this.cssClasses.nextButtonAfter.split(" ")),this.nextButton.insertAdjacentHTML("beforeend",`<span class="sr-only">${this.lang.nextText}</span>`),this.nextButton.addEventListener("click",this.gotoNextItem.bind(this)),this.currentGroupIndex===this.galleryGroup.length-1&&this.nextButton.setAttribute("disabled",""),this.dialog.insertAdjacentElement("beforeend",this.nextButton),this.prevButton=document.createElement("button"),this.prevButton.setAttribute("type","button"),this.prevButton.classList.add(...this.cssClasses.prevButtonStyle.split(" ")),this.prevButton.classList.add(...this.cssClasses.prevButtonAfter.split(" ")),this.prevButton.setAttribute("aria-label",this.lang.prevLabel),this.prevButton.insertAdjacentHTML("beforeend",`<span class="sr-only">${this.lang.prevText}</span>`),this.prevButton.addEventListener("click",this.gotoPrevItem.bind(this)),this.currentGroupIndex===0&&this.prevButton.setAttribute("disabled",""),this.dialog.insertAdjacentElement("beforeend",this.prevButton),this.navListener=this.keyBoardNavigation.bind(this),document.addEventListener("keydown",this.navListener),this.dialog.addEventListener("touchstart",t=>{this.startTouchX=t.changedTouches[0].pageX,this.startTouchY=t.changedTouches[0].pageY}),this.dialog.addEventListener("touchend",t=>{let e;this.startTouchX-t.changedTouches[0].pageX>10&&(this.gotoNextItem(),e=!0),this.startTouchX-t.changedTouches[0].pageX<10&&(this.gotoPrevItem(),e=!0),this.startTouchY-t.changedTouches[0].pageY>10&&!e&&this.gotoNextItem(),this.startTouchY-t.changedTouches[0].pageY<10&&!e&&this.gotoPrevItem()})}showNavigation(){this.nextButton.removeAttribute("disabled"),this.currentGroupIndex===this.galleryGroup.length-1&&(this.nextButton.setAttribute("disabled",""),this.prevButton.focus()),this.prevButton.removeAttribute("disabled"),this.currentGroupIndex===0&&(this.prevButton.setAttribute("disabled",""),this.nextButton.focus())}hideNavigation(){this.nextButton&&this.nextButton.setAttribute("disabled",""),this.prevButton&&this.prevButton.setAttribute("disabled","")}gotoNextItem(){this.prevButton.removeAttribute("disabled"),this.currentGroupIndex<this.galleryGroup.length-1&&(this.currentGroupIndex++,this.plugin.gotoNextAction()),this.currentGroupIndex===this.galleryGroup.length-1&&(this.nextButton.setAttribute("disabled",""),this.prevButton.focus())}gotoPrevItem(){this.nextButton.removeAttribute("disabled"),this.currentGroupIndex>0&&(this.currentGroupIndex--,this.plugin.gotoPrevAction()),this.currentGroupIndex===0&&(this.prevButton.setAttribute("disabled",""),this.nextButton.focus())}keyBoardNavigation(t){(t.keyCode===39||t.key==="ArrowRight"||t.code==="ArrowRight"&&this.currentGroupIndex<this.galleryGroup.length-1)&&this.gotoNextItem(),(t.keyCode===37||t.key==="ArrowLeft"||t.code==="ArrowLeft"&&this.currentGroupIndex>0)&&this.gotoPrevItem()}onDialogCreation(){const t=document.querySelectorAll("[data-refresh-on-dialog-close]");t.length>0&&this.dialog.addEventListener("close",()=>{h.call({url:window.location.href,method:"GET",success:i=>{t.forEach(e=>{const s=e.getAttribute("data-refresh-on-dialog-close"),r=document.implementation.createHTMLDocument("");r.body.innerHTML=i;const o=r.body.querySelector(`[data-refresh-on-dialog-close="${s}"]`);o&&e.innerHTML!==o.innerHTML&&(e.innerHTML=o.innerHTML)})}})})}}function c(n){switch(n){case"../i18n/s-modal-en":case"../i18n/s-modal-en.json":return a(()=>import("./s-modal-en-DIBN_CqK.js"),[]);case"../i18n/s-modal-fr":case"../i18n/s-modal-fr.json":return a(()=>import("./s-modal-fr-tDo1l3nl.js"),[]);case"../i18n/s-modal-nl":case"../i18n/s-modal-nl.json":return a(()=>import("./s-modal-nl--vo_tNx4.js"),[]);default:return new Promise(function(t,i){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+n)))})}}function g(n){switch(n){case"../i18n/s-modal-en":case"../i18n/s-modal-en.json":return a(()=>import("./s-modal-en-DIBN_CqK.js"),[]);case"../i18n/s-modal-fr":case"../i18n/s-modal-fr.json":return a(()=>import("./s-modal-fr-tDo1l3nl.js"),[]);case"../i18n/s-modal-nl":case"../i18n/s-modal-nl.json":return a(()=>import("./s-modal-nl--vo_tNx4.js"),[]);default:return new Promise(function(t,i){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+n)))})}}export{u as Modal,v as default};
