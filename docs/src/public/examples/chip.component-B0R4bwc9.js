import{_ as l}from"./docs-LJADo47n.js";import{A as r}from"./a11y-furJA6xF.js";import{S as h}from"./site-lang-Bijq8_jq.js";import{a as o,c,f as d,b as m,s as g}from"./floating-ui.dom-Bhj1bJbm.js";class C{constructor(){Array.from(document.querySelectorAll("[data-chip]")).forEach((t,i)=>{new u(t,i)})}}class u{constructor(e,t){this.siteLang=h.getLang(),this.modalMinWidth=300,this.cssClasses={chipElement:"relative",chipTriggerWrapper:"chip-trigger-wrapper relative flex",chipTrigger:'chip-trigger flex items-center after:text-black after:shrink-0 after:w-[1em] after:h-[1em] after:mask-center after:mask-no-repeat after:mask-contain after:bg-current after:mask-[url("/icons/chevron-down.svg")] after:shrink-0 after:ml-2',chipTriggerClear:'chip-trigger-clear after:block after:text-black after:shrink-0 after:w-[1em] after:h-[1em] after:mask-center after:mask-no-repeat after:mask-contain after:bg-current after:mask-[url("/icons/clear.svg")]',chipOptionAfter:'chip-option px-2 text-current after:hidden after:text-black after:shrink-0 after:w-[1em] after:h-[1em] after:mask-center after:mask-no-repeat after:mask-contain after:bg-current after:mask-[url("/icons/check.svg")]',chipBubble:"chip-bubble absolute -top-4 -right-2 h-5 min-w-5 bg-blue-500 text-white rounded-full text-sm leading-0 flex justify-center items-center",chipModal:"chip-modal fixed top-0 left-0 z-10 p-6 bg-white shadow-sm max-w-max w-[90vw]",chipModalClose:'chip-modal-close absolute top-0 right-0 p-2 after:block after:text-black after:shrink-0 after:w-[1em] after:h-[1em] after:mask-center after:mask-no-repeat after:mask-contain after:bg-current after:mask-[url("/icons/clear.svg")]',chipModalClear:'chip-modal-clear flex items-center ml-auto before:mr-2 before:text-black before:shrink-0 before:w-[1em] before:h-[1em] before:mask-center before:mask-no-repeat before:mask-contain before:bg-current before:mask-[url("/icons/clear.svg")]'},this.element=e,this.index=t,this.showClearInButton=this.element.hasAttribute("data-chip-show-clear-in-button")?this.element.getAttribute("data-chip-show-clear-in-button")==="true":!0,this.showClearInModal=this.element.hasAttribute("data-chip-show-clear-in-modal")?this.element.getAttribute("data-chip-show-clear-in-modal")==="true":!0,this.showCloseButton=this.element.hasAttribute("data-chip-show-close-button")?this.element.getAttribute("data-chip-show-close-button")==="true":!0,this.showBubble=this.element.hasAttribute("data-chip-show-bubble")?this.element.getAttribute("data-chip-show-bubble")==="true":!0,this.closeOnChange=this.element.hasAttribute("data-chip-close-on-change")?this.element.getAttribute("data-chip-close-on-change")==="true":!0,this.prefixId=this.element.hasAttribute("data-chip-prefix")?this.element.getAttribute("data-chip-prefix"):"",Object.keys(this.element.dataset).forEach(s=>{this.cssClasses[s]&&(this.cssClasses[s]=this.element.dataset[s])}),this.toggleListener=this.toggleAction.bind(this),this.changeListener=this.changeAction.bind(this),this.externalChangeListener=this.externalChangeAction.bind(this),this.clearListener=this.clearAction.bind(this),this.escapeListener=this.escapeAction.bind(this),this.clickOutsideListener=this.clickOutsideAction.bind(this),this.name=e.getAttribute("data-chip"),e.classList.add(...this.cssClasses.chipElement.split(" ")),this.getLang().then(()=>{this.initComponents(),this.initInputs(),this.selected=this.getSelected(),this.initTrigger(),this.initModal(),this.showBubble&&this.setBubbleCount()})}async getLang(){this.lang=await b(`../i18n/s-chip-${this.siteLang}.json`)}initComponents(){for(this.modalElement=document.createElement("div");this.element.childNodes.length>0;)this.modalElement.appendChild(this.element.childNodes[0]);if(this.modalElement.classList.add("hidden"),this.modalElement.classList.add(...this.cssClasses.chipModal.split(" ")),this.element.insertAdjacentElement("afterbegin",this.modalElement),this.triggerWrapperElement=document.createElement("div"),this.triggerWrapperElement.classList.add(...this.cssClasses.chipTriggerWrapper.split(" ")),this.triggerElement=document.createElement("button"),this.triggerElement.type="button",this.triggerElement.classList.add(...this.cssClasses.chipTrigger.split(" ")),this.triggerTextElement=document.createElement("span"),this.triggerElement.insertAdjacentElement("beforeend",this.triggerTextElement),this.triggerElement.addEventListener("jschange",this.externalChangeListener),this.triggerWrapperElement.insertAdjacentElement("beforeend",this.triggerElement),this.prefixId.length>0){const e=document.getElementById(this.prefixId);e&&this.triggerElement.insertAdjacentElement("afterbegin",e)}if(this.showClearInButton){this.triggerClearElement=document.createElement("button"),this.triggerClearElement.type="button",this.triggerClearElement.classList.add("hidden"),this.triggerClearElement.classList.add(...this.cssClasses.chipTriggerClear.split(" ")),this.triggerClearElement.ariaLabel=this.lang.clear;const e=document.createElement("span");e.innerHTML=this.lang.clear,e.classList.add("sr-only"),this.triggerClearElement.insertAdjacentElement("beforeend",e),this.triggerWrapperElement.insertAdjacentElement("beforeend",this.triggerClearElement)}if(this.showBubble&&(this.bubbleElement=document.createElement("div"),this.bubbleElement.classList.add(...this.cssClasses.chipBubble.split(" ")),this.bubbleElement.classList.add("hidden"),this.triggerWrapperElement.insertAdjacentElement("beforeend",this.bubbleElement)),this.element.insertAdjacentElement("afterbegin",this.triggerWrapperElement),this.showCloseButton){this.modalCloseElement=document.createElement("button"),this.modalCloseElement.type="button",this.modalCloseElement.classList.add(...this.cssClasses.chipModalClose.split(" ")),this.modalCloseElement.ariaLabel=this.lang.modalClose;const e=document.createElement("span");e.classList.add("sr-only"),e.innerHTML=this.lang.modalClose,this.modalCloseElement.insertAdjacentElement("beforeend",e),this.modalElement.insertAdjacentElement("afterbegin",this.modalCloseElement)}this.showClearInModal&&(this.modalClearElement=document.createElement("button"),this.modalClearElement.type="button",this.modalClearElement.classList.add(...this.cssClasses.chipModalClear.split(" ")),this.modalClearElement.ariaLabel=this.lang.modalClear,this.element.hasAttribute("data-chip-modal-clear-label")&&(this.modalClearElement.innerText=this.element.getAttribute("data-chip-modal-clear-label")),this.modalElement.insertAdjacentElement("beforeend",this.modalClearElement))}initTrigger(){this.triggerElement.setAttribute("aria-haspopup","dialog"),this.showBubble?(this.triggerTextElement.innerText=this.name,this.triggerElement.setAttribute("aria-label",`${this.name}, ${this.lang.triggerNotSelectedLabel}`)):(this.setTriggerLabel(),this.setTriggerText()),this.setTriggerState(),this.triggerElement.addEventListener("click",this.toggleListener),this.showClearInButton&&this.triggerClearElement.addEventListener("click",this.clearListener)}initModal(){this.modalElement.setAttribute("aria-modal","true"),this.modalElement.setAttribute("role","dialog");const e=this.modalElement.querySelector("h1,h2"),t=`chip-${this.index}-heading`;e.id=t,this.modalElement.setAttribute("aria-labelledby",t),this.modalElement.setAttribute("tabindex","-1")}initInputs(){const e=this.modalElement.querySelectorAll("input");Array.from(e).forEach(t=>{const i=this.modalElement.querySelector(`label[for=${t.id}]`);i&&t.setAttribute("data-chip-input-label",i.innerHTML.trim())})}toggleModal(){this.modalElement.classList.contains("hidden")?(this.modalElement.classList.remove("hidden"),this.trapFocus(),this.modalElement.addEventListener("change",this.changeListener),this.modalElement.addEventListener("jschange",this.changeListener),this.showCloseButton&&this.modalCloseElement.addEventListener("click",this.toggleListener),this.showClearInModal&&this.modalClearElement.addEventListener("click",this.clearListener),document.addEventListener("click",this.clickOutsideListener),document.addEventListener("keydown",this.escapeListener),this.positionModal(),this.element.dispatchEvent(new Event("chip-modal-open",{bubbles:!0}))):(this.modalElement.classList.add("hidden"),this.modalElement.removeEventListener("change",this.changeListener),this.modalElement.removeEventListener("jschange",this.changeListener),this.showCloseButton&&this.modalCloseElement.removeEventListener("click",this.toggleListener),this.showClearInModal&&this.modalClearElement.removeEventListener("click",this.clearListener),document.removeEventListener("click",this.clickOutsideListener),document.removeEventListener("keydown",this.escapeListener),window.removeEventListener("resize",this.positionModal.bind(this)),this.element.dispatchEvent(new Event("chip-modal-close",{bubbles:!0})))}trapFocus(){r.keepFocus(this.modalElement),this.modalElement.focus()}positionModal(){const e=this;o(this.triggerElement,this.modalElement,()=>{c(this.triggerElement,this.modalElement,{strategy:"fixed",placement:"bottom-start",middleware:[d(),m({padding:16}),g({apply({availableWidth:t,availableHeight:i,elements:s}){Object.assign(s.floating.style,{minWidth:`${Math.min(e.modalMinWidth,t)}px`})}})]}).then(({x:t,y:i})=>{Object.assign(this.modalElement.style,{left:`${t}px`,top:`${i}px`})})})}getTriggerText(){const e=this.getCount();switch(e){case 0:return this.name;case 1:return this.selected;default:return`${this.selected} +${e-1}`}}getTriggerLabel(){const e=this.getCount();switch(e){case 0:return`${this.name}, ${this.lang.triggerNotSelectedLabel}`;case 1:return`${this.selected}, ${this.name}, ${this.lang.triggerSelectedLabel}`;default:return`${this.selected} +${e-1}, ${this.name}, ${this.lang.triggerSelectedLabel}`}}setTriggerText(){const e=new DOMParser().parseFromString(this.getTriggerText(),"text/html");this.triggerTextElement.innerText=e.documentElement.textContent}setTriggerLabel(){const e=this.getTriggerLabel();this.triggerElement.setAttribute("aria-label",e)}setBubbleCount(){const e=this.getCount();e>0?(this.bubbleElement.innerText=`${e}`,this.bubbleElement.classList.remove("hidden"),this.bubbleElement.classList.add("flex")):(this.bubbleElement.classList.add("hidden"),this.bubbleElement.classList.remove("flex"))}getSelected(){const e=this.modalElement.querySelector("input:checked");return e?e.getAttribute("data-chip-input-label"):""}getCount(){return this.modalElement.querySelectorAll("input:checked").length}setTriggerState(){this.selected&&this.selected.length>0?(this.element.classList.add("active"),this.showClearInButton&&this.triggerClearElement.classList.remove("hidden")):(this.element.classList.remove("active"),this.showClearInButton&&this.triggerClearElement.classList.add("hidden"))}toggleAction(){this.toggleModal()}changeAction(e){const t=e.target,i=t.getAttribute("data-chip-input-label");t.checked?t.getAttribute("type")==="checkbox"?this.selected||(this.selected=i):this.selected=i:this.selected===i&&(this.selected=this.getSelected()),this.showBubble?this.setBubbleCount():(this.setTriggerText(),this.setTriggerLabel()),this.setTriggerState(),this.closeOnChange&&this.toggleModal()}externalChangeAction(){this.getCount()===0?this.selected="":this.selected=this.getSelected(),this.showBubble?this.setBubbleCount():(this.setTriggerText(),this.setTriggerLabel()),this.setTriggerState()}clearAction(e){const t=new Event("jschange",{bubbles:!0}),i=this.modalElement.querySelectorAll("input:checked");Array.from(i).forEach(a=>{a.checked=!1,a.dispatchEvent(t)}),this.selected="",this.modalElement.querySelector("input").dispatchEvent(t),this.showBubble?this.setBubbleCount():(this.setTriggerText(),this.setTriggerLabel()),this.setTriggerState(),this.element.dispatchEvent(new Event("chip-cleared",{bubbles:!0}))}escapeAction(e){(e.keyCode===27||e.key==="Escape")&&this.toggleModal()}clickOutsideAction(e){this.element.contains(e.target)||this.toggleModal()}}function b(n){switch(n){case"../i18n/s-chip-en":case"../i18n/s-chip-en.json":return l(()=>import("./s-chip-en-CBcv-tHG.js"),[]);case"../i18n/s-chip-fr":case"../i18n/s-chip-fr.json":return l(()=>import("./s-chip-fr-Bf-gKyM3.js"),[]);case"../i18n/s-chip-nl":case"../i18n/s-chip-nl.json":return l(()=>import("./s-chip-nl-D6HV1K5d.js"),[]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+n)))})}}export{C as default};
