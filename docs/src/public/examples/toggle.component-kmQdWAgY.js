class r{constructor(){const e=document.querySelectorAll("[data-toggle]");Array.from(e).forEach(i=>{this.initToggleTrigger(i)})}initToggleTrigger(e){const i=e.getAttribute("data-toggle");if(!i){console.warn("Toggle trigger is missing data-toggle attribute");return}const t=document.getElementById(i);if(!t){console.warn(`Toggle target with id "${i}" not found`);return}t.classList.contains("[interpolate-size:allow-keywords]")&&this.initAnimation(t),t.hasAttribute("open")?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls",t.id),e.setAttribute("tabindex","0"),e.addEventListener("click",o=>{o.preventDefault(),this.checkGroupState(t),this.toggleAction(e,t)}),e.addEventListener("keydown",o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),this.checkGroupState(t),this.toggleAction(e,t))}),t.addEventListener("open",()=>{this.toggleAction(e,t,"open")}),t.addEventListener("close",()=>{this.toggleAction(e,t,"close")})}checkGroupState(e){const i=e.getAttribute("data-toggle-group");if(i){const t=document.querySelector(`[data-toggle-group=${i}][open]`);if(t&&t!==e){const o=document.querySelector(`[data-toggle="${t.id}"]`);o&&this.toggleAction(o,t,"close")}}}toggleAction(e,i,t=""){let o=e.getAttribute("aria-expanded")==="true";t==="open"?o=!1:t==="close"&&(o=!0);const n=document.querySelectorAll(`[data-toggle='${i.id}']`);if(Array.from(n).forEach(s=>{s.setAttribute("aria-expanded",o?"false":"true")}),e.getAttribute("data-toggle-scroll")){const s=document.querySelector(`${e.getAttribute("data-toggle-scroll")}`);s&&window.scrollTo({top:s.offsetTop,behavior:"smooth"})}o?i.removeAttribute("open"):i.setAttribute("open","")}initAnimation(e){"CSS"in window&&!CSS.supports("interpolate-size:allow-keywords")&&new MutationObserver(t=>{t.forEach(o=>{if(o.type==="attributes"&&o.attributeName==="open")if(e.hasAttribute("open")){const n=document.createElement("div");n.style.width=e.scrollWidth+"px",n.style.visibility="hidden",n.style.pointerEvents="none",n.style.position="absolute",n.style.overflow="hidden",n.insertAdjacentHTML("afterbegin",e.innerHTML),document.body.appendChild(n),e.style.height=n.getBoundingClientRect().height+"px",n.remove()}else e.style.height="0px"})}).observe(e,{attributes:!0,attributeFilter:["open"]})}}export{r as default};
