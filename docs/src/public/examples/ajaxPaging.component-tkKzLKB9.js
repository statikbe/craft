class g{constructor(){const e=document.querySelectorAll("[data-ajax-paging]");Array.from(e).forEach(t=>{new l(t)})}}class l{constructor(e){this.paging=e,this.init()}init(){if(this.pagingId=this.paging.getAttribute("id"),this.loaderBlock=this.paging.querySelector("[data-ajax-paging-loader]"),this.contentBlock=this.paging.querySelector("[data-ajax-paging-content]"),this.linksBlock=this.paging.querySelector("[data-ajax-paging-links]"),this.pagingId===null)throw new Error(`AjaxPaging: The paging element must have an id. Element: ${this.paging.outerHTML}`);if(!this.contentBlock)throw new Error("AjaxPaging: The paging element must need an element with attribute data-ajax-paging-content");if(!this.linksBlock)throw new Error("AjaxPaging: The paging element must need an element with attribute data-ajax-paging-links");this.linksBlock.addEventListener("click",async e=>{const t=e.target;if(t instanceof HTMLAnchorElement&&t.closest(`#${this.pagingId} [data-ajax-paging-links]`)){e.preventDefault();const n=t.href;if(n!=="javascript:void(0);"){this.showLoading();try{await this.getFilterData(n)}catch(a){console.error("Error fetching filter data:",a),this.hideLoading()}}}},!1)}showLoading(){this.contentBlock&&(this.contentBlock.innerHTML=""),this.linksBlock&&(this.linksBlock.textContent=""),this.loaderBlock&&this.loaderBlock.classList.remove("hidden")}hideLoading(){this.loaderBlock&&this.loaderBlock.classList.add("hidden")}async getFilterData(e){try{const t=await fetch(e);if(!t.ok){console.error(`Something went wrong when fetching data. Status: ${t.status} ${t.statusText}`);return}const n=await t.text(),i=new DOMParser().parseFromString(n,"text/html").getElementById(this.pagingId);if(i){const o=i.querySelector("[data-ajax-paging-content]"),r=i.querySelector("[data-ajax-paging-links]");o&&r?this.contentBlock&&this.linksBlock?(this.contentBlock.innerHTML=o.innerHTML,this.linksBlock.innerHTML=r.innerHTML,this.hideLoading()):console.error("Content or links block is not initialized."):console.error("Required elements are missing in the returned data.")}else console.error("Could not find data on returned page.")}catch(t){const n=t instanceof Error?t.message:String(t);console.error(`There was a connection error: ${n}`,t)}}}export{g as default};
